# Disable automatic directory slash redirect that breaks CORS preflight
DirectorySlash Off

RewriteEngine On

# Prevent trailing slash redirects for API endpoints (breaks CORS preflight)
RewriteCond %{REQUEST_URI} ^/api/
RewriteRule ^(.+)/$ /$1 [R=307,L]

# Redirect all requests to index.php if the file or directory doesn't exist
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.php [QSA,L]
